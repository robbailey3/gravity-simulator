!function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n,i){this.position=t,this.radius=e,this.mass=n,this.canvas=i};e.GameObject=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8);e.GameEngine=i.GameEngine;var o=n(3);e.Vector=o.Vector},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.GameObject=i.GameObject;var o=n(9);e.Sun=o.Sun;var s=n(10);e.Planet=s.Planet},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return n.fromArray=function(t){return new n(t[0],t[1],t[2])},n.fromObject=function(t){return new n(t.x,t.y,t.z)},n.clone=function(t){return n.fromObject(t)},n.minus=function(t,e){return new n(t.x-e.x,t.y-e.y,t.z-e.z)},n.add=function(t,e){return new n(t.x+e.x,t.y+e.y,t.z+e.z)},n.times=function(t,e){return new n(e*t.x,e*t.y,e*t.z)},n.divide=function(t,e){return new n(t.x/e,t.y/e,t.z/e)},n.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},n.cross=function(t,e){return new n(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},n.normalize=function(t){var e=n.magnitude(t);return n.times(t,0===e?1/0:1/e)},n.magnitude=function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2))},n.prototype.toString=function(){return JSON.stringify({x:this.x,y:this.y})},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.normalize=function(){return n.normalize(this)},n.prototype.magnitude=function(){return n.magnitude(this)},n.prototype.add=function(t){return n.add(this,t)},n.prototype.minus=function(t){return n.minus(this,t)},n.prototype.times=function(t){return n.times(this,t)},n.prototype.divide=function(t){return n.divide(this,t)},n.prototype.dot=function(t){return n.dot(this,t)},n.prototype.cross=function(t){return n.cross(this,t)},n}();e.Vector=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(5);n(11);var c=new a.Canvas,u=new a.GameEngine(c);c.setCanvasSize(window.innerWidth,window.innerHeight);var l,h=document.getElementById("planet-mass"),i=document.getElementById("planet-mass-exp"),d=document.getElementById("planet-radius"),o=document.getElementById("planet-radius-value"),s=document.getElementById("planet-trail"),r=document.getElementById("planet-trail-value"),f=document.getElementById("planet-color"),p=document.getElementById("planet-color-value"),v=(document.getElementById("sun-mass"),document.getElementById("sun-mass-exp"),document.getElementById("sun-radius"),document.getElementById("sun-radius-value"),document.getElementById("gravity-vis"),document.getElementById("force-vector"));!function(t){var e=new a.Sun(new a.Vector(window.innerWidth/2,window.innerHeight/2,0),15,1.989e30,t),n=new a.Planet(new a.Vector(window.innerWidth/2-200,window.innerHeight/2,0),5,5e12,new a.Vector(0,5.159,0),t,"#0077be");n.trailLength=2,u.gameObjects.push(n);var i=new a.Planet(new a.Vector(window.innerWidth/2+250,window.innerHeight/2,0),10,5e14,new a.Vector(0,4.122,0),t,"#cc1142");i.trailLength=2,u.gameObjects.push(e,n,i)}(c),h.addEventListener("change",function(){i.innerText=h.value}),d.addEventListener("change",function(){var t=5e4*parseInt(d.value,10);o.innerHTML=t.toExponential(1)+"m"}),s.addEventListener("change",function(){r.innerText=s.value}),f.addEventListener("change",function(){p.innerText=f.value}),v.addEventListener("change",function(){u.showForceVector=v.checked}),c.el.addEventListener("mousedown",function(t){l=new a.Vector(t.clientX,t.clientY,0),u.isDragging=!0,u.clickPosition=l}),c.el.addEventListener("mousemove",function(t){u.isDragging&&(u.dragPosition=new a.Vector(t.clientX,t.clientY,0))}),c.el.addEventListener("mouseup",function(t){var e=parseInt(d.value,10),n=1*Math.pow(10,parseInt(h.value,10));u.isDragging=!1,u.dragPosition=void 0;var i=(t.clientX-l.x)/10,o=(t.clientY-l.y)/10;if(t.ctrlKey){var s=new a.Sun(new a.Vector(t.clientX,t.clientY,0),50,1.989e30,c);u.gameObjects.push(s)}else{var r=new a.Planet(new a.Vector(t.clientX,t.clientY,0),e,n,new a.Vector(i,o,0),c);u.gameObjects.push(r)}})},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(6)),i(e(1)),i(e(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7);e.Canvas=i.Canvas},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){void 0===t&&(t="body"),this.defaults={backgroundColor:"#0f0f0f",fillColor:"#333",strokeColor:"#fff"},this.el=document.createElement("canvas"),document.querySelector(t).appendChild(this.el),this.ctx=this.el.getContext("2d")}return t.prototype.setCanvasSize=function(t,e){return this.el.width=t,this.el.height=e,this},t.prototype.fillBackground=function(t){void 0===t&&(t=this.defaults.backgroundColor),this.ctx.save(),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.el.width,this.el.height),this.ctx.closePath(),this.ctx.restore()},t.prototype.fillCircle=function(t,e,n,i,o){void 0===i&&(i=this.defaults.fillColor),this.ctx.fillStyle=i,this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),o&&(this.ctx.shadowOffsetX=o.shadowOffsetX,this.ctx.shadowOffsetY=o.shadowOffsetY,this.ctx.shadowColor=o.shadowColor,this.ctx.shadowBlur=o.shadowBlur),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},t.prototype.drawLine=function(t,e,n){void 0===n&&(n=this.defaults.strokeColor),this.ctx.save(),this.ctx.strokeStyle=n,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this.ctx.restore()},t}();e.Canvas=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),r=n(3),i=function(){function t(t){this.canvas=t,this.times=[],this.gameObjects=[],this.isDragging=!1,this.showForceVector=!1,this.showGravityVisualisation=!1,this.constants={G:667e-13},this.animate()}return t.prototype.animate=function(){for(var t,e=this,n=performance.now();0<this.times.length&&this.times[0]<=n-1e3;)this.times.shift();this.times.push(n),t=this.times.length,document.getElementById("fps").innerHTML=t.toString(),this.canvas.fillBackground(),this.calculateObjectForces(),this.drawGravityVisualisation();for(var i=0,o=this.gameObjects;i<o.length;i++){var s=o[i];s.move(),s.draw()}this.isDragging&&this.canvas.drawLine(this.clickPosition,this.dragPosition||this.clickPosition),this.cleanUpCanvas(),requestAnimationFrame(function(){e.animate()})},t.prototype.drawForceVector=function(t,e){this.canvas.drawLine(t,t.add(e),"#ff0000")},t.prototype.detectCollision=function(t,e){return!(!t||!e)&&(t.position.x>=e.position.x-e.radius&&t.position.x<=e.position.x+e.radius&&t.position.y>=e.position.y-e.radius&&t.position.y<=e.position.y+e.radius)},t.prototype.cleanUpCanvas=function(){for(var t=0,e=this.gameObjects;t<e.length;t++){var n=e[t];(n.position.x>this.canvas.el.width||n.position.x<0)&&this.gameObjects.splice(this.gameObjects.indexOf(n),1),(n.position.y>this.canvas.el.height||n.position.y<0)&&this.gameObjects.splice(this.gameObjects.indexOf(n),1)}},t.prototype.drawGravityVisualisation=function(){var s=this;if(this.showGravityVisualisation)for(var t=0;t<this.canvas.el.width;){for(var e=0,n=function(){var o=new r.Vector(t,e,0);i.gameObjects.forEach(function(t){var e=5e4*Math.sqrt(Math.pow(o.x-t.position.x,2)+Math.pow(o.y-t.position.y,2)),n=t.position.minus(o).normalize().times(s.constants.G*t.mass/Math.pow(e,3)),i=Math.min(n.magnitude(),10);1<i&&s.canvas.fillCircle(o.x,o.y,i,"#11111133")}),e+=30},i=this;e<this.canvas.el.height;)n();t+=30}},t.prototype.calculateObjectForces=function(){for(var t=0;t<this.gameObjects.length;t+=1)for(var e=0;e<this.gameObjects.length;e+=1)if(t!==e){var n=this.gameObjects[t],i=this.gameObjects[e];if(this.detectCollision(n,i)){var o=n.mass>i.mass?i:n;n.mass,i.mass;return void this.gameObjects.splice(this.gameObjects.indexOf(o),1)}var s=5e4*Math.sqrt(Math.pow(n.position.x-i.position.x,2)+Math.pow(n.position.y-i.position.y,2)),r=i.position.minus(n.position).normalize().times(this.constants.G*i.mass/Math.pow(s,3));this.showForceVector&&n instanceof a.Planet&&this.drawForceVector(n.position,r.times(1e3)),n.velocity=n.velocity.add(r)}},t}();e.GameEngine=i},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=function(s){function t(t,e,n,i){var o=s.call(this,t,e,n,i)||this;return o.draw(),o.velocity=new r.Vector(0,0,0),o}return o(t,s),t.prototype.draw=function(){this.canvas.fillCircle(this.position.x,this.position.y,this.radius,"#FDB813",{shadowBlur:50,shadowColor:"#FDB813",shadowOffsetX:0,shadowOffsetY:0})},t.prototype.move=function(){this.position=this.position.add(this.velocity)},t}(n(0).GameObject);e.Sun=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(a){function t(t,e,n,i,o,s){void 0===s&&(s="#e1a95f");var r=a.call(this,t,e,n,o)||this;return r.velocity=i,r.color=s,r.previousPositions=[],r.trailLength=15,r.draw(),r}return o(t,a),t.prototype.draw=function(){for(var t=0,e=this.previousPositions;t<e.length;t++){var n=e[t];this.canvas.fillCircle(n.x,n.y,1,"#fff")}this.canvas.fillCircle(this.position.x,this.position.y,this.radius,this.color,{shadowBlur:2,shadowColor:"#ddd",shadowOffsetX:0,shadowOffsetY:0})},t.prototype.move=function(){this.previousPositions.push(this.position),this.previousPositions.length>this.trailLength&&this.previousPositions.shift(),this.position=this.position.add(this.velocity)},t}(n(0).GameObject);e.Planet=s},function(t,e,n){}]);